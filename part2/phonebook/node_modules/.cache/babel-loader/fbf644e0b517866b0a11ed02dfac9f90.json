{"ast":null,"code":"import _slicedToArray from\"/home/magneto/software/learning/university/fullstackopen/part2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import phService from'./services/phonebook';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message,type=_ref.type;console.log(\"Call to Notification\");if(message===null||type===null){console.log(\"Returning null, params: \",message,type);return null;}return/*#__PURE__*/_jsx(\"div\",{className:type,children:message});};var Filter=function Filter(props){return/*#__PURE__*/_jsxs(\"div\",{children:[\"filter shown with \",/*#__PURE__*/_jsx(\"input\",{value:props.search,onChange:props.handler})]});};var PersonForm=function PersonForm(props){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:props.addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:props.newName,onChange:props.handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:props.newNumber,onChange:props.handleNumberChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};var Person=function Person(_ref2){var person=_ref2.person,deleteEntry=_ref2.deleteEntry;return/*#__PURE__*/_jsxs(_Fragment,{children:[\"\".concat(person.name,\" \").concat(person.number),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteEntry(person.id);},children:\"delete\"}),\" \",/*#__PURE__*/_jsx(\"br\",{})]});};var Persons=function Persons(props){return/*#__PURE__*/_jsx(\"div\",{children:props.persons.map(function(person){return/*#__PURE__*/_jsx(Person,{person:person,deleteEntry:props.deleteEntry},person.id);})});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setNewSearch=_useState8[1];var TYPE={ERROR:\"error\",SUCCESS:\"success\"};var _useState9=useState({message:null,type:TYPE.ERROR}),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var updateNotification=function updateNotification(message,type){setNotification({message:message,type:type});setTimeout(function(){setNotification({message:null,type:null});},5000);};useEffect(function(){phService.getAll().then(function(phonebook){return setPersons(phonebook);}).catch(function(error){updateNotification(\"Unable to fetch phonebook from the server. Please refresh the page and try again!\",TYPE.ERROR);});},[]);var addPerson=function addPerson(event){event.preventDefault();// prevents default form behaviour which is to submit a post request\nvar newPerson={name:newName,number:newNumber};if(persons.map(function(person){return person.name;}).includes(newPerson.name)){if(persons.map(function(person){return person.number;}).includes(newPerson.number)){updateNotification(\"The entry \".concat(newName,\" \").concat(newNumber,\" is already added to the phonebook\"),TYPE.ERROR);}else{var confirmed=window.confirm(\"Update phone number for entry '\".concat(newPerson.name,\" to \").concat(newPerson.number,\"'?\"));if(confirmed){phService.update(persons.find(function(person){return person.name===newPerson.name;}).id,newPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.name===newPerson.name?returnedPerson:person;}));setNewName('');setNewNumber('');updateNotification(\"Successfully updated phone number for entry '\".concat(newPerson.name,\"' to '\").concat(newPerson.number,\"'!\"),TYPE.SUCCESS);}).catch(function(error){updateNotification(\"Error updating the number for the entry '\".concat(newPerson.name,\"' to the phonebook.\\n                                The entry was probably deleted from the server. Please refresh the page and try again!\"),TYPE.ERROR);});}}}else{phService.create(newPerson).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');updateNotification(\"Successfully created entry '\".concat(newPerson.name,\" \").concat(newPerson.number,\"'!\"),TYPE.SUCCESS);}).catch(function(error){updateNotification(\"Error submitting the new entry: \".concat(newPerson.name,\" \").concat(newPerson.number,\" to the phonebook. Please try again!\"),TYPE.ERROR);});}};var deleteEntry=function deleteEntry(id){var personToDel=persons.find(function(person){return person.id===id;});var confirmed=window.confirm(\"Delete entry \".concat(personToDel.name,\" \").concat(personToDel.number,\"?\"));if(!confirmed){updateNotification(\"the deletion of entry \".concat(personToDel.name,\" \").concat(personToDel.number,\" was cancelled\"),TYPE.SUCCESS);}else{phService.deleteEntry(id).then(function(response){console.log(response);setPersons(persons.filter(function(person){return person.id!==personToDel.id;}));updateNotification(\"Successfully deleted entry \".concat(personToDel.name,\" \").concat(personToDel.number),TYPE.SUCCESS);}).catch(function(error){updateNotification(\"Unable to delete entry \".concat(personToDel.name,\" \").concat(personToDel.number,\" from the server. Please try again!\"),TYPE.ERROR);});}};var personsToShow=function personsToShow(search){return search===''?persons:persons.filter(function(person){return person.name.toLowerCase().includes(search.toLowerCase());});};var updateSearch=function updateSearch(event){setNewSearch(event.target.value);};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notification,{message:notification.message,type:notification.type}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Filter,{search:search,handler:updateSearch}),/*#__PURE__*/_jsx(\"h3\",{children:\"add a new entry\"}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,newNumber:newNumber,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:personsToShow(search),deleteEntry:deleteEntry})]});};export default App;","map":{"version":3,"sources":["/home/magneto/software/learning/university/fullstackopen/part2/phonebook/src/App.js"],"names":["React","useEffect","useState","phService","Notification","message","type","console","log","Filter","props","search","handler","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Person","person","deleteEntry","name","number","id","Persons","persons","map","App","setPersons","setNewName","setNewNumber","setNewSearch","TYPE","ERROR","SUCCESS","notification","setNotification","updateNotification","setTimeout","getAll","then","phonebook","catch","error","event","preventDefault","newPerson","includes","confirmed","window","confirm","update","find","returnedPerson","create","concat","personToDel","response","filter","personsToShow","toLowerCase","updateSearch","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport phService from './services/phonebook'\n\nconst Notification = ({message, type}) => {\n  console.log(\"Call to Notification\")\n\n  if(message === null || type === null) {\n    console.log(\"Returning null, params: \", message, type)\n    return null\n  }\n\n  return(\n    <div className={type}>\n      {message}\n    </div>\n  )\n}\n\nconst Filter = (props) => <div>filter shown with <input value={props.search} onChange={props.handler}/></div>\n\nconst PersonForm = (props) => (\n  <form onSubmit={props.addPerson}>\n    <div>\n      name: <input value={props.newName} onChange={props.handleNameChange}/>\n    </div>\n    <div>\n      number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Person = ( {person, deleteEntry} ) => {\n  \n  return (\n    <>\n      {`${person.name} ${person.number}`} <button onClick={() => deleteEntry(person.id)}>delete</button> <br />\n    </>\n  )\n}\n\nconst Persons = (props) => (\n  <div>\n    {props.persons.map( person => <Person key={person.id} person={person} deleteEntry={props.deleteEntry}/>)}\n  </div>\n)\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setNewSearch ] = useState('')\n\n  const TYPE = {\n    ERROR: \"error\",\n    SUCCESS: \"success\"\n  }\n  const [ notification, setNotification ] = useState( {message: null, type: TYPE.ERROR})\n\n  const updateNotification = (message, type) => {\n    setNotification( {message: message, type: type} )\n    setTimeout( () => { setNotification( {message: null, type: null} ) }, 5000)\n  }\n\n  useEffect( () => {\n    phService\n      .getAll()\n      .then( phonebook => setPersons( phonebook ) )\n      .catch( error => { updateNotification(\"Unable to fetch phonebook from the server. Please refresh the page and try again!\", TYPE.ERROR) } ) \n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault() // prevents default form behaviour which is to submit a post request\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    if ( persons.map( person => person.name ).includes(newPerson.name) ) {\n      if ( persons.map( person => person.number).includes(newPerson.number) ){\n        updateNotification(`The entry ${newName} ${newNumber} is already added to the phonebook`, TYPE.ERROR )\n      } else {\n        const confirmed = window.confirm(`Update phone number for entry '${newPerson.name} to ${newPerson.number}'?`)\n        if (confirmed) {\n          phService\n          .update( persons.find( person => person.name === newPerson.name).id, newPerson )\n          .then( returnedPerson => {\n            setPersons(persons.map( person => person.name === newPerson.name ? returnedPerson : person ))\n            setNewName('')\n            setNewNumber('')\n            updateNotification(`Successfully updated phone number for entry '${newPerson.name}' to '${newPerson.number}'!`, TYPE.SUCCESS)\n          } )\n          .catch( error => {\n            updateNotification(`Error updating the number for the entry '${newPerson.name}' to the phonebook.\n                                The entry was probably deleted from the server. Please refresh the page and try again!`, TYPE.ERROR)\n          })\n        }\n      }\n      \n    } else {\n\n      phService\n        .create(newPerson)\n        .then( returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          updateNotification(`Successfully created entry '${newPerson.name} ${newPerson.number}'!`, TYPE.SUCCESS)\n        } )\n        .catch( error => {\n          updateNotification(`Error submitting the new entry: ${newPerson.name} ${newPerson.number} to the phonebook. Please try again!`, TYPE.ERROR)\n        })\n    }\n  }\n\n  const deleteEntry = (id) => {\n    const personToDel = persons.find( person => person.id === id)\n    const confirmed = window.confirm(`Delete entry ${personToDel.name} ${personToDel.number}?`)\n    \n    if(!confirmed) { \n      updateNotification(`the deletion of entry ${personToDel.name} ${personToDel.number} was cancelled`, TYPE.SUCCESS)\n    } else {\n      phService\n      .deleteEntry(id)\n      .then( response => {\n          console.log(response)\n          setPersons( persons.filter( person => person.id !== personToDel.id ) )\n          updateNotification(`Successfully deleted entry ${personToDel.name} ${personToDel.number}`, TYPE.SUCCESS)\n        }\n      ).catch( error => {\n          updateNotification(`Unable to delete entry ${personToDel.name} ${personToDel.number} from the server. Please try again!`, TYPE.ERROR)\n      })\n    }\n  }\n\n  const personsToShow = ( search ) => search === ''\n    ? persons\n    : persons.filter( person => person.name.toLowerCase().includes( search.toLowerCase() ))\n\n\n  const updateSearch = (event) => {\n    setNewSearch(event.target.value)\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <Notification message={notification.message} type={notification.type}/>\n      <h2>Phonebook</h2>\n      <Filter search={search} handler={updateSearch}/>\n      <h3>add a new entry</h3>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow(search)} deleteEntry={deleteEntry}/>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}