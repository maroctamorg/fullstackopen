{"code":"(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){\"use strict\";t.r(n);var c=t(15),r=t.n(c),a=t(3),o=t(2),u=t(4),s=t.n(u),i=\"http://localhost:3001/api/persons\",l=function(){return s.a.get(i).then((function(e){return e.data}))},d=function(e){return s.a.post(i,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put(\"\".concat(i,\"/\").concat(e),n).then((function(e){return e.data}))},b=function(e){return s.a.delete(\"\".concat(i,\"/\").concat(e))},m=t(0),f=function(e){var n=e.message,t=e.type;return console.log(\"Call to Notification\"),null===n||null===t?(console.log(\"Returning null, params: \",n,t),null):Object(m.jsx)(\"div\",{className:t,children:n})},j=function(e){return Object(m.jsxs)(\"div\",{children:[\"filter shown with \",Object(m.jsx)(\"input\",{value:e.search,onChange:e.handler})]})},p=function(e){return Object(m.jsxs)(\"form\",{onSubmit:e.addPerson,children:[Object(m.jsxs)(\"div\",{children:[\"name: \",Object(m.jsx)(\"input\",{value:e.newName,onChange:e.handleNameChange})]}),Object(m.jsxs)(\"div\",{children:[\"number: \",Object(m.jsx)(\"input\",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(m.jsx)(\"div\",{children:Object(m.jsx)(\"button\",{type:\"submit\",children:\"add\"})})]})},O=function(e){var n=e.person,t=e.deleteEntry;return Object(m.jsxs)(m.Fragment,{children:[\"\".concat(n.name,\" \").concat(n.number),\" \",Object(m.jsx)(\"button\",{onClick:function(){return t(n.id)},children:\"delete\"}),\" \",Object(m.jsx)(\"br\",{})]})},y=function(e){return Object(m.jsx)(\"div\",{children:e.persons.map((function(n){return Object(m.jsx)(O,{person:n,deleteEntry:e.deleteEntry},n.id)}))})},g=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(\"\"),u=Object(a.a)(r,2),s=u[0],i=u[1],O=Object(o.useState)(\"\"),g=Object(a.a)(O,2),x=g[0],v=g[1],w=Object(o.useState)(\"\"),C=Object(a.a)(w,2),N=C[0],k=C[1],S=\"error\",E=\"success\",P=Object(o.useState)({message:null,type:S}),T=Object(a.a)(P,2),U=T[0],D=T[1],J=function(e,n){D({message:e,type:n}),setTimeout((function(){D({message:null,type:null})}),5e3)};Object(o.useEffect)((function(){l().then((function(e){return c(e)})).catch((function(e){J(\"Unable to fetch phonebook from the server. Please refresh the page and try again!\",S)}))}),[]);return Object(m.jsxs)(\"div\",{children:[Object(m.jsx)(f,{message:U.message,type:U.type}),Object(m.jsx)(\"h2\",{children:\"Phonebook\"}),Object(m.jsx)(j,{search:N,handler:function(e){k(e.target.value)}}),Object(m.jsx)(\"h3\",{children:\"add a new entry\"}),Object(m.jsx)(p,{addPerson:function(e){e.preventDefault();var n={name:s,number:x};t.map((function(e){return e.name})).includes(n.name)?t.map((function(e){return e.number})).includes(n.number)?J(\"The entry \".concat(s,\" \").concat(x,\" is already added to the phonebook\"),S):window.confirm(\"Update phone number for entry '\".concat(n.name,\" to \").concat(n.number,\"'?\"))&&h(t.find((function(e){return e.name===n.name})).id,n).then((function(e){c(t.map((function(t){return t.name===n.name?e:t}))),i(\"\"),v(\"\"),J(\"Successfully updated phone number for entry '\".concat(n.name,\"' to '\").concat(n.number,\"'!\"),E)})).catch((function(e){J(\"Error updating the number for the entry '\".concat(n.name,\"' to the phonebook.\\n                                The entry was probably deleted from the server. Please refresh the page and try again!\"),S)})):d(n).then((function(e){c(t.concat(e)),i(\"\"),v(\"\"),J(\"Successfully created entry '\".concat(n.name,\" \").concat(n.number,\"'!\"),E)})).catch((function(e){J(\"Error submitting the new entry: \".concat(n.name,\" \").concat(n.number,\" to the phonebook. Please try again!\"),S)}))},newName:s,newNumber:x,handleNameChange:function(e){i(e.target.value)},handleNumberChange:function(e){v(e.target.value)}}),Object(m.jsx)(\"h3\",{children:\"Numbers\"}),Object(m.jsx)(y,{persons:function(e){return\"\"===e?t:t.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}))}(N),deleteEntry:function(e){var n=t.find((function(n){return n.id===e}));window.confirm(\"Delete entry \".concat(n.name,\" \").concat(n.number,\"?\"))?b(e).then((function(e){console.log(e),c(t.filter((function(e){return e.id!==n.id}))),J(\"Successfully deleted entry \".concat(n.name,\" \").concat(n.number),E)})).catch((function(e){J(\"Unable to delete entry \".concat(n.name,\" \").concat(n.number,\" from the server. Please try again!\"),S)})):J(\"the deletion of entry \".concat(n.name,\" \").concat(n.number,\" was cancelled\"),E)}})]})};t(40);r.a.render(Object(m.jsx)(g,{}),document.getElementById(\"root\"))}},[[41,1,2]]]);","name":"static/js/main.3a944821.chunk.js","map":{"version":3,"sources":["static/js/main.3a944821.chunk.js"],"names":["this","push","40","module","exports","__webpack_require__","41","__webpack_exports__","r","react_dom","react_dom_default","n","slicedToArray","react","axios","axios_default","baseUrl","phonebook","a","get","then","response","data","newObject","post","id","put","concat","delete","jsx_runtime","App_Notification","_ref","message","type","console","log","Object","className","children","App_Filter","props","value","search","onChange","handler","App_PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","App_Person","_ref2","person","deleteEntry","name","number","onClick","App_Persons","persons","map","src_App","_useState","_useState2","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewSearch","TYPE","_useState9","_useState10","notification","setNotification","updateNotification","setTimeout","catch","error","event","target","preventDefault","newPerson","includes","window","confirm","find","returnedPerson","filter","toLowerCase","personsToShow","personToDel","render","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpphonebook\"] = this[\"webpackJsonpphonebook\"] || []).push([[0],{\n\n/***/ 40:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(15);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(4);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/services/phonebook.js\nvar baseUrl='http://localhost:3001/api/persons';var phonebook_getAll=function getAll(){return axios_default.a.get(baseUrl).then(function(response){return response.data;});};var phonebook_create=function create(newObject){return axios_default.a.post(baseUrl,newObject).then(function(response){return response.data;});};var phonebook_update=function update(id,newObject){return axios_default.a.put(\"\".concat(baseUrl,\"/\").concat(id),newObject).then(function(response){return response.data;});};var phonebook_deleteEntry=function deleteEntry(id){return axios_default.a.delete(\"\".concat(baseUrl,\"/\").concat(id));};/* harmony default export */ var phonebook = ({getAll:phonebook_getAll,create:phonebook_create,update:phonebook_update,deleteEntry:phonebook_deleteEntry});\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/App.js\nvar App_Notification=function Notification(_ref){var message=_ref.message,type=_ref.type;console.log(\"Call to Notification\");if(message===null||type===null){console.log(\"Returning null, params: \",message,type);return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:type,children:message});};var App_Filter=function Filter(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"filter shown with \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{value:props.search,onChange:props.handler})]});};var App_PersonForm=function PersonForm(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:props.addPerson,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"name: \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{value:props.newName,onChange:props.handleNameChange})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"number: \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{value:props.newNumber,onChange:props.handleNumberChange})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",children:\"add\"})})]});};var App_Person=function Person(_ref2){var person=_ref2.person,deleteEntry=_ref2.deleteEntry;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[\"\".concat(person.name,\" \").concat(person.number),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:function onClick(){return deleteEntry(person.id);},children:\"delete\"}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{})]});};var App_Persons=function Persons(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:props.persons.map(function(person){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App_Person,{person:person,deleteEntry:props.deleteEntry},person.id);})});};var App_App=function App(){var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=Object(react[\"useState\"])(''),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=Object(react[\"useState\"])(''),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=Object(react[\"useState\"])(''),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),search=_useState8[0],setNewSearch=_useState8[1];var TYPE={ERROR:\"error\",SUCCESS:\"success\"};var _useState9=Object(react[\"useState\"])({message:null,type:TYPE.ERROR}),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var updateNotification=function updateNotification(message,type){setNotification({message:message,type:type});setTimeout(function(){setNotification({message:null,type:null});},5000);};Object(react[\"useEffect\"])(function(){phonebook.getAll().then(function(phonebook){return setPersons(phonebook);}).catch(function(error){updateNotification(\"Unable to fetch phonebook from the server. Please refresh the page and try again!\",TYPE.ERROR);});},[]);var addPerson=function addPerson(event){event.preventDefault();// prevents default form behaviour which is to submit a post request\nvar newPerson={name:newName,number:newNumber};if(persons.map(function(person){return person.name;}).includes(newPerson.name)){if(persons.map(function(person){return person.number;}).includes(newPerson.number)){updateNotification(\"The entry \".concat(newName,\" \").concat(newNumber,\" is already added to the phonebook\"),TYPE.ERROR);}else{var confirmed=window.confirm(\"Update phone number for entry '\".concat(newPerson.name,\" to \").concat(newPerson.number,\"'?\"));if(confirmed){phonebook.update(persons.find(function(person){return person.name===newPerson.name;}).id,newPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.name===newPerson.name?returnedPerson:person;}));setNewName('');setNewNumber('');updateNotification(\"Successfully updated phone number for entry '\".concat(newPerson.name,\"' to '\").concat(newPerson.number,\"'!\"),TYPE.SUCCESS);}).catch(function(error){updateNotification(\"Error updating the number for the entry '\".concat(newPerson.name,\"' to the phonebook.\\n                                The entry was probably deleted from the server. Please refresh the page and try again!\"),TYPE.ERROR);});}}}else{phonebook.create(newPerson).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');updateNotification(\"Successfully created entry '\".concat(newPerson.name,\" \").concat(newPerson.number,\"'!\"),TYPE.SUCCESS);}).catch(function(error){updateNotification(\"Error submitting the new entry: \".concat(newPerson.name,\" \").concat(newPerson.number,\" to the phonebook. Please try again!\"),TYPE.ERROR);});}};var deleteEntry=function deleteEntry(id){var personToDel=persons.find(function(person){return person.id===id;});var confirmed=window.confirm(\"Delete entry \".concat(personToDel.name,\" \").concat(personToDel.number,\"?\"));if(!confirmed){updateNotification(\"the deletion of entry \".concat(personToDel.name,\" \").concat(personToDel.number,\" was cancelled\"),TYPE.SUCCESS);}else{phonebook.deleteEntry(id).then(function(response){console.log(response);setPersons(persons.filter(function(person){return person.id!==personToDel.id;}));updateNotification(\"Successfully deleted entry \".concat(personToDel.name,\" \").concat(personToDel.number),TYPE.SUCCESS);}).catch(function(error){updateNotification(\"Unable to delete entry \".concat(personToDel.name,\" \").concat(personToDel.number,\" from the server. Please try again!\"),TYPE.ERROR);});}};var personsToShow=function personsToShow(search){return search===''?persons:persons.filter(function(person){return person.name.toLowerCase().includes(search.toLowerCase());});};var updateSearch=function updateSearch(event){setNewSearch(event.target.value);};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App_Notification,{message:notification.message,type:notification.type}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App_Filter,{search:search,handler:updateSearch}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"add a new entry\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App_PersonForm,{addPerson:addPerson,newName:newName,newNumber:newNumber,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App_Persons,{persons:personsToShow(search),deleteEntry:deleteEntry})]});};/* harmony default export */ var src_App = (App_App);\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(40);\n\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));\n\n/***/ })\n\n},[[41,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/magneto/software/learning/university/fullstackopen/part2/phonebook/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/magneto/software/learning/university/fullstackopen/part2/phonebook/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/magneto/software/learning/university/fullstackopen/part2/phonebook/node_modules/postcss-loader/src/index.js??postcss!/home/magneto/software/learning/university/fullstackopen/part2/phonebook/src/index.css","/home/magneto/software/learning/university/fullstackopen/part2/phonebook/src/services/phonebook.js","/home/magneto/software/learning/university/fullstackopen/part2/phonebook/src/App.js","/home/magneto/software/learning/university/fullstackopen/part2/phonebook/src/index.js"],"names":["baseUrl","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteEntry","delete","Notification","message","type","console","log","Filter","props","search","handler","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Person","person","name","number","Persons","persons","map","App","useState","setPersons","setNewName","setNewNumber","setNewSearch","TYPE","ERROR","SUCCESS","notification","setNotification","updateNotification","setTimeout","useEffect","phService","phonebook","catch","error","event","preventDefault","newPerson","includes","confirmed","window","confirm","find","returnedPerson","concat","personToDel","filter","personsToShow","toLowerCase","updateSearch","target","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import axios from 'axios'\n\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(response => response.data)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject).then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\n}\n\nconst deleteEntry = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { getAll, create, update, deleteEntry }","import React, { useEffect, useState } from 'react'\nimport phService from './services/phonebook'\n\nconst Notification = ({message, type}) => {\n  console.log(\"Call to Notification\")\n\n  if(message === null || type === null) {\n    console.log(\"Returning null, params: \", message, type)\n    return null\n  }\n\n  return(\n    <div className={type}>\n      {message}\n    </div>\n  )\n}\n\nconst Filter = (props) => <div>filter shown with <input value={props.search} onChange={props.handler}/></div>\n\nconst PersonForm = (props) => (\n  <form onSubmit={props.addPerson}>\n    <div>\n      name: <input value={props.newName} onChange={props.handleNameChange}/>\n    </div>\n    <div>\n      number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Person = ( {person, deleteEntry} ) => {\n  \n  return (\n    <>\n      {`${person.name} ${person.number}`} <button onClick={() => deleteEntry(person.id)}>delete</button> <br />\n    </>\n  )\n}\n\nconst Persons = (props) => (\n  <div>\n    {props.persons.map( person => <Person key={person.id} person={person} deleteEntry={props.deleteEntry}/>)}\n  </div>\n)\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setNewSearch ] = useState('')\n\n  const TYPE = {\n    ERROR: \"error\",\n    SUCCESS: \"success\"\n  }\n  const [ notification, setNotification ] = useState( {message: null, type: TYPE.ERROR})\n\n  const updateNotification = (message, type) => {\n    setNotification( {message: message, type: type} )\n    setTimeout( () => { setNotification( {message: null, type: null} ) }, 5000)\n  }\n\n  useEffect( () => {\n    phService\n      .getAll()\n      .then( phonebook => setPersons( phonebook ) )\n      .catch( error => { updateNotification(\"Unable to fetch phonebook from the server. Please refresh the page and try again!\", TYPE.ERROR) } ) \n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault() // prevents default form behaviour which is to submit a post request\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    if ( persons.map( person => person.name ).includes(newPerson.name) ) {\n      if ( persons.map( person => person.number).includes(newPerson.number) ){\n        updateNotification(`The entry ${newName} ${newNumber} is already added to the phonebook`, TYPE.ERROR )\n      } else {\n        const confirmed = window.confirm(`Update phone number for entry '${newPerson.name} to ${newPerson.number}'?`)\n        if (confirmed) {\n          phService\n          .update( persons.find( person => person.name === newPerson.name).id, newPerson )\n          .then( returnedPerson => {\n            setPersons(persons.map( person => person.name === newPerson.name ? returnedPerson : person ))\n            setNewName('')\n            setNewNumber('')\n            updateNotification(`Successfully updated phone number for entry '${newPerson.name}' to '${newPerson.number}'!`, TYPE.SUCCESS)\n          } )\n          .catch( error => {\n            updateNotification(`Error updating the number for the entry '${newPerson.name}' to the phonebook.\n                                The entry was probably deleted from the server. Please refresh the page and try again!`, TYPE.ERROR)\n          })\n        }\n      }\n      \n    } else {\n\n      phService\n        .create(newPerson)\n        .then( returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          updateNotification(`Successfully created entry '${newPerson.name} ${newPerson.number}'!`, TYPE.SUCCESS)\n        } )\n        .catch( error => {\n          updateNotification(`Error submitting the new entry: ${newPerson.name} ${newPerson.number} to the phonebook. Please try again!`, TYPE.ERROR)\n        })\n    }\n  }\n\n  const deleteEntry = (id) => {\n    const personToDel = persons.find( person => person.id === id)\n    const confirmed = window.confirm(`Delete entry ${personToDel.name} ${personToDel.number}?`)\n    \n    if(!confirmed) { \n      updateNotification(`the deletion of entry ${personToDel.name} ${personToDel.number} was cancelled`, TYPE.SUCCESS)\n    } else {\n      phService\n      .deleteEntry(id)\n      .then( response => {\n          console.log(response)\n          setPersons( persons.filter( person => person.id !== personToDel.id ) )\n          updateNotification(`Successfully deleted entry ${personToDel.name} ${personToDel.number}`, TYPE.SUCCESS)\n        }\n      ).catch( error => {\n          updateNotification(`Unable to delete entry ${personToDel.name} ${personToDel.number} from the server. Please try again!`, TYPE.ERROR)\n      })\n    }\n  }\n\n  const personsToShow = ( search ) => search === ''\n    ? persons\n    : persons.filter( person => person.name.toLowerCase().includes( search.toLowerCase() ))\n\n\n  const updateSearch = (event) => {\n    setNewSearch(event.target.value)\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <Notification message={notification.message} type={notification.type}/>\n      <h2>Phonebook</h2>\n      <Filter search={search} handler={updateSearch}/>\n      <h3>add a new entry</h3>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow(search)} deleteEntry={deleteEntry}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"]}}